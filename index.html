<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ö–æ—Ñ–µ–π–Ω—è THE CUP</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
    <style>
        .product-card {
            transition: transform 0.2s;
            border: 1px solid #f0f0f0;
        }

        .product-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
        }

        .cart-badge {
            position: relative;
            top: -2px;
            font-size: 0.75em;
        }
        #cart-content,
        #order-form {
            display: none;
        }
    </style>


    <script>
        let cart = [];
        let categories = {};
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º Mini App –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω—ã
        function saveCart() {
            localStorage.setItem("cartData", JSON.stringify(cart));
        }

        function loadCart() {
            const storedCart = localStorage.getItem("cartData");
            if (storedCart) {
                cart = JSON.parse(storedCart);
                updateCartButton();
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞ (–±–µ–∑ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π, –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ)
        function saveOrderFormData() {
            const orderData = {
                name: document.getElementById("name").value,
                phone: document.getElementById("phone").value,
                street: document.getElementById("street").value,
                house: document.getElementById("house").value,
                entrance: document.getElementById("entrance").value,
                floor: document.getElementById("floor").value,
                apartment: document.getElementById("apartment").value,
                intercom: document.getElementById("intercom").value,
                deliveryType: document.getElementById("delivery_type").value,
                orderDescription: document.getElementById("order_description").value,
                numPersons: document.getElementById("num_persons").value,
                deliveryTime: document.getElementById("delivery_time").value,
                paymentType: document.getElementById("payment_type").value
            };
            localStorage.setItem("orderFormData", JSON.stringify(orderData));
        }

        function loadOrderFormData() {
            const savedData = localStorage.getItem("orderFormData");
            if (savedData) {
                const orderData = JSON.parse(savedData);
                document.getElementById("name").value = orderData.name || "";
                document.getElementById("phone").value = orderData.phone || "";
                document.getElementById("street").value = orderData.street || "";
                document.getElementById("house").value = orderData.house || "";
                document.getElementById("entrance").value = orderData.entrance || "";
                document.getElementById("floor").value = orderData.floor || "";
                document.getElementById("apartment").value = orderData.apartment || "";
                document.getElementById("intercom").value = orderData.intercom || "";
                document.getElementById("delivery_type").value = orderData.deliveryType || "delivery";
                document.getElementById("order_description").value = orderData.orderDescription || "";
                document.getElementById("num_persons").value = orderData.numPersons || "1";
                document.getElementById("delivery_time").value = orderData.deliveryTime || "";
                document.getElementById("payment_type").value = orderData.paymentType || "card";
            }
        }

        // –ï—Å–ª–∏ –≤ URL –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä order_data, –∑–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –∏ –≤ —Ñ–æ—Ä–º—É

        // –ï—Å–ª–∏ –≤ URL –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä order_data, –∑–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –∏ –≤ —Ñ–æ—Ä–º—É
        function loadOrderDataFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const orderDataParam = urlParams.get('order_data');
            if (orderDataParam) {
                try {
                    const orderDataStr = atob(orderDataParam);
                    const orderData = JSON.parse(orderDataStr);
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã –∏–∑ orderData.delivery_info
                    if (orderData.delivery_info) {
                        document.getElementById("name").value = orderData.delivery_info.name || "";
                        document.getElementById("phone").value = orderData.delivery_info.phone || "";
                        document.getElementById("street").value = orderData.delivery_info.street || "";
                        document.getElementById("house").value = orderData.delivery_info.house || "";
                        document.getElementById("entrance").value = orderData.delivery_info.entrance || "";
                        document.getElementById("floor").value = orderData.delivery_info.floor || "";
                        document.getElementById("apartment").value = orderData.delivery_info.apartment || "";
                        document.getElementById("intercom").value = orderData.delivery_info.intercom || "";
                        document.getElementById("delivery_type").value = orderData.delivery_info.deliveryType || "delivery";
                        document.getElementById("order_description").value = orderData.delivery_info.orderDescription || "";
                        document.getElementById("num_persons").value = orderData.delivery_info.numPersons || "1";
                        document.getElementById("delivery_time").value = orderData.delivery_info.deliveryTime || "";
                        document.getElementById("payment_type").value = orderData.delivery_info.paymentType || "card";
                    }
                    // –ï—Å–ª–∏ –≤ orderData –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Ö –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    if (orderData.items) {
                        cart = orderData.items;
                        updateCartButton();
                        renderCartItems();
                        saveCart();
                    }
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ localStorage, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –ø—Ä–æ–ø–∞–ª–∏
                    saveOrderFormData();
                    console.log("–î–∞–Ω–Ω—ã–µ –∏–∑ URL —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã");
                    // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —É–¥–∞–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL, —á—Ç–æ–±—ã –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å
                    history.replaceState(null, "", window.location.pathname);
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ URL: ", e);
                }
            }
        }

        // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
        document.addEventListener("DOMContentLoaded", function () {
            console.log("–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é...");
            fetchMenu();
            loadCart();
            // –ï—Å–ª–∏ URL —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä order_data, –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            loadOrderDataFromURL();
            // –ï—Å–ª–∏ –Ω–µ—Ç, –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            loadOrderFormData();
        });



        // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ–Ω—é —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function fetchMenu() {
            try {
                console.log('–ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é...');
                const response = await fetch("http://127.0.0.1:8000/menu");
                console.log('–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', response.status);
                const data = await response.json();
                console.log("–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:", data);
                processMenuData(data);
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—é:", error);
            }
        }

        function processMenuData(data) {
            console.log('–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω—é...');
            if (!data || typeof data !== 'object') {
                console.error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—é:', data);
                return;
            }

            categories = {};
            for (let categoryId in data) {
                const category = data[categoryId];
                console.log(`–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ${categoryId}:`, category);

                if (!category.items || !Array.isArray(category.items)) {
                    console.error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', category);
                    continue;
                }

                categories[categoryId] = {
                    name: category.name,
                    items: category.items
                };
            }
            renderCategories();
        }
        function renderCategories() {
            const categoriesContainer = document.querySelector("#categories");
            console.log('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', categoriesContainer);

            if (!categoriesContainer) {
                console.error("–≠–ª–µ–º–µ–Ω—Ç #categories –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                return;
            }

            categoriesContainer.innerHTML = "";

            for (let categoryId in categories) {
                const category = categories[categoryId];
                console.log(`–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ${categoryId}`);

                const categoryButton = document.createElement("button");
                categoryButton.className = "btn btn-outline-secondary me-2 mb-2";
                categoryButton.innerText = category.name;
                categoryButton.onclick = () => {
                    console.log(`–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è ${categoryId}`);
                    showItems(categoryId);
                };

                categoriesContainer.appendChild(categoryButton);
            }
        } function showItems(categoryId) {
            console.log(`–ü–æ–∫–∞–∑ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ${categoryId}`);
            const itemsContainer = document.getElementById("items");
            console.log('–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤:', itemsContainer);

            if (!itemsContainer) {
                console.error("–≠–ª–µ–º–µ–Ω—Ç #items –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                return;
            }

            itemsContainer.innerHTML = "";
            const category = categories[categoryId];

            if (!category) {
                console.error(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è ${categoryId} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!`);
                return;
            }

            console.log(`–¢–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${category.items.length}`);

            category.items.forEach((item) => {
                console.log('–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:', item);
                const col = document.createElement("div");
                col.className = "col-12 col-md-6 col-lg-4";

                const card = document.createElement("div");
                card.className = "card product-card mb-3";
                card.innerHTML = `
          <img src="${item.image}" class="card-img-top product-image" alt="${item.name}">
          <div class="card-body">
            <h5 class="card-title">${item.name}</h5>
            <p class="card-text">${item.price}‚ÇΩ</p>
            <button class="btn btn-primary"
              onclick="addToCart('${item.externalId || item.id}', '${item.name}', ${item.price})">
              –î–æ–±–∞–≤–∏—Ç—å
            </button>
          </div>
        `;

                col.appendChild(card);
                itemsContainer.appendChild(col);
            });
        }
        // –§—É–Ω–∫—Ü–∏—è addToCart —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç externalId —Ç–æ–≤–∞—Ä–∞
        function addToCart(itemExternalId, itemName, itemPrice) {
            let cartItem = cart.find((i) => i.externalId === itemExternalId);
            if (cartItem) {
                cartItem.quantity++;
            } else {
                cart.push({ externalId: itemExternalId, name: itemName, price: itemPrice, quantity: 1 });
            }
            updateCartButton();
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ—Ä–∑–∏–Ω—É —Å—Ä–∞–∑—É, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
            saveCart();
        }

        function updateCartButton() {
            const cartBtn = document.getElementById("cart-button");
            if (cartBtn) {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartBtn.innerText = `üõí –ö–æ—Ä–∑–∏–Ω–∞ (${totalItems})`;
            }
        }
        function showCart() {
            document.getElementById("main-content").style.display = "block";
            document.getElementById("cart-content").style.display = "block";
            document.getElementById("order-form").style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞
            document.getElementById("cart-button").style.display = "none";
            renderCartItems();
        }

        function renderCartItems() {
            const cartItemsContainer = document.getElementById("cart-items");
            if (cartItemsContainer) {
                cartItemsContainer.innerHTML = "";
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = "<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>";
                } else {
                    let total = 0;
                    cart.forEach((item) => {
                        total += item.price * item.quantity;
                        const cartItem = document.createElement("div");
                        cartItem.className = "cart-item";
                        cartItem.innerHTML = `
                  <p>${item.name} - ${item.price}‚ÇΩ x ${item.quantity}</p>
                  <button onclick="removeFromCart('${item.externalId}')">‚ùå</button>
                `;
                        cartItemsContainer.appendChild(cartItem);
                    });
                    // –í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
                    const totalDiv = document.createElement("div");
                    totalDiv.className = "cart-total";
                    totalDiv.innerHTML = `<p>–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: <strong>${total}‚ÇΩ</strong></p>`;
                    cartItemsContainer.appendChild(totalDiv);
                }
            }
        }

        function removeFromCart(itemExternalId) {
            cart = cart.filter((i) => i.externalId !== itemExternalId);
            updateCartButton();
            saveCart();
            renderCartItems();
        }

        function showOrderForm() {
            document.getElementById("cart-content").style.display = "none";
            document.getElementById("order-form").style.display = "block";
            loadOrderFormData();
        }

        // –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑" —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏—Ö –∏ –æ—á–∏—â–∞–µ–º localStorage.
        function submitOrder() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏ –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
            saveOrderFormData();
            saveCart();

            const name = document.getElementById("name").value;
            const phone = document.getElementById("phone").value;
            const street = document.getElementById("street").value;
            const house = document.getElementById("house").value;
            const entrance = document.getElementById("entrance").value;
            const floor = document.getElementById("floor").value;
            const apartment = document.getElementById("apartment").value;
            const intercom = document.getElementById("intercom").value;

            // –ù–æ–≤—ã–µ –ø–æ–ª—è
            const deliveryType = document.getElementById("delivery_type").value;
            const orderDescription = document.getElementById("order_description").value;
            const numPersons = document.getElementById("num_persons").value;
            const deliveryTime = document.getElementById("delivery_time").value;
            const paymentType = document.getElementById("payment_type").value;

            if (!name || !phone || !street || !house || !entrance || !floor || !apartment || !intercom ||
                !deliveryType || !numPersons || !deliveryTime || !paymentType) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!");
                return;
            }

            const order = {
                user_id: tg.initDataUnsafe.user?.id || "unknown",
                // –ü–µ—Ä–µ–¥–∞—ë–º —Ç–æ–≤–∞—Ä—ã —Å externalId
                items: cart.map((item) => ({ externalId: item.externalId, price: item.price, quantity: item.quantity })),
                delivery_info: {
                    name,
                    phone,
                    street,
                    house,
                    entrance,
                    floor,
                    apartment,
                    intercom,
                    deliveryType,       // –î–æ—Å—Ç–∞–≤–∫–∞ –∏–ª–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑
                    orderDescription,   // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
                    numPersons,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫
                    deliveryTime,       // –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
                    paymentType         // –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
                }
            };

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –±–æ—Ç—É
            tg.sendData(JSON.stringify(order));

            // –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            localStorage.removeItem("cartData");
            localStorage.removeItem("orderFormData");

            tg.close();
        }

        function backToCart() {
            document.getElementById("order-form").style.display = "none";
            document.getElementById("cart-content").style.display = "block";
        }

        function showItemDetails(categoryId, itemName) {
            alert(`–î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞: ${itemName}`);
        }

        document.addEventListener("DOMContentLoaded", function () {
            console.log("–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é...");
            fetchMenu();
            loadCart();
            // –ï—Å–ª–∏ URL —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä order_data, –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            loadOrderDataFromURL();
            // –ï—Å–ª–∏ –Ω–µ—Ç, –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            loadOrderFormData();
        });
    </script>
</head>
<body class="bg-light">
    <div class="container py-3">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h4 mb-0">üçî –ù–∞—à–µ –º–µ–Ω—é</h1>
                <button id="cart-button" class="btn btn-outline-primary position-relative" onclick="showCart()">
                    üõí –ö–æ—Ä–∑–∏–Ω–∞
                    <span id="cart-counter" class="cart-badge badge bg-danger">0</span>
                </button>
            </div>

            <div id="categories" class="d-flex flex-wrap gap-2 mb-4"></div>
            <div id="items" class="row g-3"></div>
        </div>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
        <div id="cart-content" style="display: none;">
            <div class="d-flex align-items-center mb-4">
                <button class="btn btn-outline-secondary me-3" onclick="document.getElementById('main-content').style.display='block'; document.getElementById('cart-content').style.display='none'; document.getElementById('cart-button').style.display = 'block' ">‚Üê</button>
                <h2 class="h5 mb-0">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
            </div>

            <div id="cart-items" class="mb-4"></div>

            <div class="d-grid gap-2">
                <button class="btn btn-success" onclick="showOrderForm()">
                    üöÄ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
        <div id="order-form" style="display: none;">
            <div class="d-flex align-items-center mb-4">
                <button class="btn btn-outline-secondary me-3" onclick="backToCart()">
                    ‚Üê
                </button>
                <h2 class="h5 mb-0">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
            </div>

            <form onsubmit="event.preventDefault(); submitOrder();">
                <div class="mb-3">
                    <label class="form-label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</label>
                    <input type="text" class="form-control mb-2" id="name" placeholder="–ò–º—è" required>
                    <input type="tel" class="form-control" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                    <div class="row g-2 mb-2">
                        <div class="col-8">
                            <input type="text" class="form-control" id="street" placeholder="–£–ª–∏—Ü–∞" required>
                        </div>
                        <div class="col-4">
                            <input type="text" class="form-control" id="house" placeholder="–î–æ–º" required>
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-3">
                            <input type="text" class="form-control" id="entrance" placeholder="–ü–æ–¥—ä–µ–∑–¥">
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="floor" placeholder="–≠—Ç–∞–∂">
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="apartment" placeholder="–ö–≤–∞—Ä—Ç–∏—Ä–∞">
                        </div>
                        <div class="col-3">
                            <input type="text" class="form-control" id="intercom" placeholder="–î–æ–º–æ—Ñ–æ–Ω">
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</label>
                    <select class="form-select mb-2" id="delivery_type" required>
                        <option value="delivery">–î–æ—Å—Ç–∞–≤–∫–∞</option>
                        <option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
                    </select>

                    <input type="time" class="form-control mb-2" id="delivery_time" required>

                    <select class="form-select mb-2" id="payment_type" required>
                        <option value="card">–ö–∞—Ä—Ç–∞</option>
                        <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
                    </select>

                    <input type="number" class="form-control mb-2" id="num_persons" min="1" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω" required>

                    <textarea class="form-control" id="order_description" rows="2" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É"></textarea>
                </div>

                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-success">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                    <button type="button" class="btn btn-outline-secondary" onclick="backToCart()">
                        –ù–∞–∑–∞–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π JavaScript –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
</body>
</html>


